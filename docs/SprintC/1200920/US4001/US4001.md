US 3000
=======================================

# 1. Requisitos

## **Demo:**

As Project Manager, I want that the "AGVManager" component supports properly, at request, the needs of the "
BackOfficeApp" application as well as the needs the AGV digital twin.
<br>
<br>

### **AC:**

* 1: It must be used the provided application protocol (SPOMS2022).
* 2: It is suggested the adoptiong of concurrent mechanisms (e.g. threads) and state sharing between these mechanisms.

### **Respostas no Forum:**

*Ainda nenhuma resposta*

# 2. Análise

* In this US the AGVManager acts as the server and the BackOfficeApp acts as client
* BackOfficeApp should comunicate with AVGManager with REQUESTS_API
* AGV digital twin should comunicate with AVGManager with STATUS_API

![Components](C:\Users\eduar\Desktop\ProjetoIntegrador\lei21_22_s4_2dj_1\Docs\SprintC\1200920\US4001\Components_Manager.svg)

In this diagram we can see how the stated components should talk to each other, in special how should the client
components send requsts to the server component.

It is worty to notice that the comunication with the Digital Twin works in the two ways:

![Manager/Twin](C:\Users\eduar\Desktop\ProjetoIntegrador\lei21_22_s4_2dj_1\Docs\SprintC\1200920\US4001\Manager_twin_Component.svg)

## Required needs

Right now the backoffice component can request the following functionalities to the AGVManager:

* Access the list of orders that need to be prepared by an AGV and be able to ask/force any of those orders to be
  immediately prepared by an AGV available.
  <br>
  <br>

Right now the AGVTwin component can request the following functionalities to the AGVManager:

* Request a task to be done by the AGV

Right now the AGVManager component can request the following functionalities to the AGVTwin:

* Request the status of an AGV
* Assign an task to an AGV

## The Server

| Server DNS                | Server Port |
|---------------------------|-------------|
| vsgate-s2.dei.isep.ipp.pt | 2225        |

# 3. Design

## Protocol

### BackOfficeApp

| Functionality                    | Message code to the server |
|----------------------------------|----------------------------|
| Obtain the position of the agv's | 5                          |
| Change the position of an bin    | 6                          |
| Assign an order to an AGV        | 7                          |
| Request all the free AGV         | 8                          |
| Request orders to be prepared    | 9                          |


### AGVTwin

| Functionality | Message code to the server |
|---------------|----------------------------|
| ??            | ??                         |
| ??            | ??                         |

## Sequence of events

![Sequence](Server_Sequence.svg)

# Testes

# 4. Implementação

# 5. Integração/Demonstração
